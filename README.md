# üöÄ TaskFlow IA - Gerenciador de Tarefas Interativo com IA

[![Status: Prototipa√ß√£o Funcional](https://img.shields.io/badge/Status-Prototipa√ß√£o%20Funcional-blue.svg)](URL_DO_PROJETO_EM_PRODUCAO)

üîó **Links Relevantes:**
- [Acesso ao Deploy](URL_DO_PROJETO_EM_PRODUCAO)
- https://docs.n8n.io/workflows/(URL_DO_FLUXO_N8N_EXPOSTO)

Um template de aplica√ß√£o full-stack que demonstra a integra√ß√£o de IA conversacional (**Gemini**) para gerenciamento de tarefas (CRUD) via chat. Utiliza **n8n** como camada de orquestra√ß√£o backend e **Supabase** para persist√™ncia de dados e autentica√ß√£o (OAuth).

## ‚ú® Motiva√ß√£o e Escopo (O Custo e a Oportunidade)

### O Problema Abordado
O principal desafio √© traduzir a **linguagem natural** do usu√°rio (via Gemini) em **a√ß√µes transacionais** no banco de dados (CRUD de tarefas) de forma segura e com contexto.

### Objetivo Principal
Criar uma **base arquitetural desacoplada** onde a intelig√™ncia √© provida por IA, o fluxo de trabalho √© gerido por low-code (n8n), e o backend √© consolidado pelo Supabase.

### Custos de Oportunidade e Limites
* **Performance vs. Agilidade:** A utiliza√ß√£o do n8n (orquestra√ß√£o) e da API free tier do Gemini introduz lat√™ncia. O custo de oportunidade √© em **tempo de resposta** em troca da **agilidade na prototipa√ß√£o**.
* **Seguran√ßa Delegada:** Ao usar a chave de Service Role do Supabase no n8n, a responsabilidade de **autoriza√ß√£o de dados por usu√°rio** √© transferida do Supabase (RLS) para o **fluxo l√≥gico do n8n**. O rigor neste fluxo √© **cr√≠tico** para a seguran√ßa.

## üõ†Ô∏è Tecnologias Chave

| Tecnologia | Fun√ß√£o no Projeto |
| :--- | :--- |
| **Gemini API** | **Intelig√™ncia Conversacional:** Analisa o texto do usu√°rio e gera um payload estruturado (JSON) para a√ß√µes CRUD. |
| **n8n** | **Orquestra√ß√£o Low-Code:** Atua como o backend intermedi√°rio, gerindo o hist√≥rico e executando as opera√ß√µes de CRUD no Supabase. |
| **Supabase (PostgreSQL + Auth)** | **Backend Unificado:** Consolida a base de dados relacional (PostgreSQL) e a infraestrutura para a autentica√ß√£o OAuth. |
| **OAuth 2.0 (via Supabase)** | **Controle de Acesso:** Garante que cada usu√°rio gerencie apenas seu pr√≥prio conjunto de tarefas e hist√≥rico. |

-----

## üíª Como Rodar Localmente

Siga estas etapas para configurar e rodar o projeto na sua m√°quina:

### 1\. Pr√©-requisitos

Certifique-se de ter instalado:

* Node.js (vers√£o recomendada)
* npm, yarn ou pnpm
* Uma conta ativa no **Supabase**.

### 2\. Clone o Reposit√≥rio

```bash
git clone [https://docs.github.com/pt/migrations/importing-source-code/using-the-command-line-to-import-source-code/adding-locally-hosted-code-to-github](https://docs.github.com/pt/migrations/importing-source-code/using-the-command-line-to-import-source-code/adding-locally-hosted-code-to-github)
cd taskflow-ia
````

### 3\. Instale as Depend√™ncias

```bash
npm install
# ou
yarn install
```

### 4\. Configura√ß√£o das Vari√°veis de Ambiente

Crie um arquivo chamado **`.env.local`** na raiz do projeto e adicione suas chaves:

```
# .env.local

# URL da sua aplica√ß√£o
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="gere um codigo seguro"

# N8N Credentials
N8N_WEBHOOK_URL="SUA URL DO WEBHOOK N8N"
N8N_AUTH_TOKEN="CHAVE DE AUTENTICA√á√ÉO PARA BLOCO DO N8N"

# Supabase Credentials
SUPABASE_PROJECT_URL="SUA URL SUPABASE"
SUPABASE_API_KEY=SUA SECRET  KEY SUPABASE

NEXT_PUBLIC_SUPABASE_PROJECT_URL="SUA URL SUPABASE"
NEXT_PUBLIC_SUPABASE_API_KEY=SUA KEY SUPABASE

# Google OAuth Credentials
GOOGLE_CLIENT_ID=SEU GOOGLE CLIENT ID
GOOGLE_CLIENT_SECRET=SEU GOOGLE SECRET

```

### 5\. Configura√ß√£o do Banco de Dados (Supabase)

√â **mandat√≥rio** que o esquema exista antes de iniciar a aplica√ß√£o.

#### 5.1. Cria√ß√£o das Tabelas

Execute o seguinte script SQL no SQL Editor do Supabase:

```sql
-- Tabela de Usu√°rios (necess√°ria para Auth)
CREATE TABLE users (
    id TEXT PRIMARY KEY,
    email TEXT UNIQUE NOT NULL,
    name TEXT,
    image TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now())
);

-- Tabela para Itens de Tarefa
CREATE TABLE todo_items (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    user_id TEXT REFERENCES users(id) NOT NULL,
    task_description TEXT NOT NULL,
    title TEXT,
    category TEXT,
    is_completed BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now())
);

-- Tabela para Hist√≥rico de Conversa√ß√£o (Contexto do Chat)
CREATE TABLE chat_history (
    id TEXT PRIMARY KEY,
    user_id TEXT REFERENCES users(id) NOT NULL,
    conversation JSONB NOT NULL, 
    created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now())
);
```

#### 5.2. Configura√ß√£o do n8n

1.  EM ANDAMENTO!!

### 6\. Inicie o Servidor de Desenvolvimento

```bash
npm run dev
# ou
yarn dev
```

Abra `http://localhost:3000` no seu navegador.
